<ion-header [translucent]="true" xmlns="http://www.w3.org/1999/html">
<ion-toolbar>
  <div class="p-1 d-flex gap-1 align-items-center justify-content-between">

    <ion-back-button defaultHref="" (click)="navCtrl.back()" slot="start" ></ion-back-button>

    <ion-title>Card Contents</ion-title>
  </div>
</ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true">
  <ion-grid  >
    <div id="bg"></div>

    <ion-card *ngFor="let card of cardDetails?.CartContents" size="12" size-lg="6" class="relative pl-custom-padding" class="CreateCard border-0 m-2" style="max-width: 540px;" >
      <ion-item lines="none">
        <div class="image-container">
          <img class="image-post" alt="Project Image" [src]="card.boxImg"/>

        </div>
        <ion-label class="ion-text-wrap">
          <h2 class="ion-text-base ion-font-semibold leading-7" style="font-weight: bold">{{card?.boxType}}</h2>
          <p class=" font mt-2 ion-text-base leading-7 "> <span class="fw-bold">Size:</span> {{ card.boxSize }}</p>
          <p class=" font mt-2 ion-text-base leading-7 fw-bold"> <span class="fw-bold">Price:</span>- &#8377; {{card.price}}</p>
          <p class= " font mt-2 ion-text-base leading-7 text-gray-600"><span class="fw-bold">Weight :</span> {{card.weight}}{{card.unit}}</p>

          <p class=" font mt-2 ion-text-base leading-7 text-gray-600"> <span class="fw-bold">Frequency: </span>{{card.frequency}}</p>
          <p class= " font mt-2 ion-text-base leading-7 text-gray-600"><span class="fw-bold">First Delivery:</span> {{card.deliveryDate}}</p>

        </ion-label>

      </ion-item>

      <div>
        <ion-row>
          <ion-col class="ion-text-start">
            <ion-button fill="clear" shape="round" type="button" style="color: rgba(71,106,3,0.77)" routerLink="/product-details-edit/{{card._id}}">Edit</ion-button>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-button fill="clear" shape="round" type="button" style="color: rgba(71,106,3,0.77)" (click)="removeItem(card._id)">Remove</ion-button>
          </ion-col>
        </ion-row>
      </div>
    </ion-card>


    <ion-card style="border-radius: 10px" >
      <ion-grid>
        <ion-row>
          <ion-col class="ion-text-start">
            <h4 class="fw-bold" style="color: black">SubTotal</h4>
          </ion-col>
          <ion-col class="ion-text-end">
            <h6 class="me-3" style="color: #0c0c0c"> &#8377;{{ cardDetails?.totalPrice }}</h6>
          </ion-col>
          <p>all the extra charges are included.</p>
        </ion-row>
      </ion-grid>
    </ion-card>

    <ion-card  style="border-radius: 10px" *ngIf="userData?.firstName">
      <ion-row class="ion-align-items-center">
        <ion-col size="auto">
          <ion-icon name="home" style="font-size: 24px; color: rgba(71,106,3,0.77);"></ion-icon>
        </ion-col>

          <h6 style="color: #0c0c0c" class="fw-bold sc-ion-label-md">Delivery to home</h6>

      </ion-row>
      <p class="ion-text-center mb-6 fw-bold">
        {{ userData?.firstName }} {{ userData?.lastName }} {{userData?.address[0]?.streetAddress}} {{userData?.address[0]?.city}} {{userData?.address[0]?.state}} {{userData?.address[0]?.zipCode}}
      </p>

    </ion-card>


    <ion-card  style="border-radius: 10px" *ngIf="paymentMethod === 'COD'">
      <ion-row class="ion-align-items-center">
        <svg  class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="25" height="25"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path fill="#718E3BC4" d="M271.1 144.3l54.3 14.3a8.6 8.6 0 0 1 6.6 8.1c0 4.6-4.1 8.4-9.1 8.4h-35.6a30 30 0 0 1 -11.2-2.2c-5.2-2.2-11.3-1.7-15.3 2l-19 17.5a11.7 11.7 0 0 0 -2.3 2.7 11.4 11.4 0 0 0 3.9 15.7 83.8 83.8 0 0 0 34.5 11.5V240c0 8.8 7.8 16 17.4 16h17.4c9.6 0 17.4-7.2 17.4-16V222.4c32.9-3.6 57.8-31 53.5-63-3.2-23-22.5-41.3-46.6-47.7L282.7 97.4a8.6 8.6 0 0 1 -6.6-8.1c0-4.6 4.1-8.4 9.1-8.4h35.6A30 30 0 0 1 332 83.1c5.2 2.2 11.3 1.7 15.3-2l19-17.5A11.3 11.3 0 0 0 368.5 61a11.4 11.4 0 0 0 -3.8-15.8 83.8 83.8 0 0 0 -34.5-11.5V16c0-8.8-7.8-16-17.4-16H295.4C285.8 0 278 7.2 278 16V33.6c-32.9 3.6-57.9 31-53.5 63C227.6 119.6 247 137.9 271.1 144.3zM565.3 328.1c-11.8-10.7-30.2-10-42.6 0L430.3 402a63.6 63.6 0 0 1 -40 14H272a16 16 0 0 1 0-32h78.3c15.9 0 30.7-10.9 33.3-26.6a31.2 31.2 0 0 0 .5-5.5A32 32 0 0 0 352 320H192a117.7 117.7 0 0 0 -74.1 26.3L71.4 384H16A16 16 0 0 0 0 400v96a16 16 0 0 0 16 16H372.8a64 64 0 0 0 40-14L564 377a32 32 0 0 0 1.3-48.9z"/></svg>
        <h6 style="color: #0c0c0c" class="payment fw-bold  sc-ion-label-md ">Payment Mathod</h6>
      </ion-row>
      <p  class="cod mb-6 fw-bold"> Cash On Delivery</p>
    </ion-card>

  </ion-grid>
</ion-content>


<div class="card add-cart">
  <div class="card-body">
    <button *ngIf="paymentMethod !== 'COD'" type="button" class="btn btn-primary rounded-pill w-100 fw-bold"
            [routerLink]="userData?.firstName ? '/payment' : '/address-verify'">
      {{ userData?.firstName ? 'Payment' : 'Choose Address or next step' }}
    </button>

    <button *ngIf="paymentMethod === 'COD'" type="button" class="btn btn-primary rounded-pill w-100 fw-bold" (click)="placeOrder()" routerLink="/user-profile">
      Place order
    </button>
  </div>
</div>
